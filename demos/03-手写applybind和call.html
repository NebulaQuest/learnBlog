<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>
<script>
  // 手写call
  Function.prototype.MyCall = function (context,...args) {
		// 先判断当前的this是不是函数
    if(typeof this !== 'function'){
	    console.log('请使用函数')
			return
    }
		let fun = this
    let bindObj = Object(context);
		let funName = Symbol('fn')
    bindObj[funName] = fun
    let result = bindObj[funName](...args)
    delete bindObj[funName]
    return result
  }
	// 使用call
  let callTest = {
		name: 'callTest',
  }
	function callFun(name,sex) {
		console.log('name',name,'sex',sex)
		console.log('this',this.name)
	}
	callFun.MyCall(callTest,'测试','123')
  console.log([].slice.MyCall('123123123'))
  console.log('================================')
  Function.prototype.MyApply = function (context,args) {
    if(typeof this !== 'function'){
			return
    }
		let fun = this
    let bindObj = Object(context);
		let funName = Symbol('fn')
    bindObj[funName] = fun
    let result = bindObj[funName](...args)
    delete bindObj[funName]
    return result
  }
  let applyTest = {
	  name: 'applyTest',
  }
  function applyFun(name,sex) {
	  console.log('name',name,'sex',sex)
	  console.log('this',this.name)
  }
  applyFun.MyApply(applyTest,['测试apply','345'])
  console.log('============================================')

  Function.prototype.MyBind = function (context,...args) {
    if(typeof this !== 'function'){
			return
    }
		let fun = this
    let bindObj = Object(context);
		return function Fun(...args2) {
			let _this
			if(this instanceof Fun){
        _this = this
      }else{
				_this = bindObj
      }
			let funName = Symbol('fn')
      _this[funName] = fun
      let result = _this[funName](...args,...[].slice.call(arguments))
      delete _this[funName]
      return result
    }
  }
	let bindObj = {
		name: 'bindObj',
  }
	function funBind(name,sex) {
		console.log('name',name,'sex',sex)
		console.log('this',this.name)
    return 123
	}
	let res = funBind.MyBind(bindObj,'textBind')
  console.log(res('secondParams'))

  let resObj = new res('secondParamsObj')
  console.log(resObj)
</script>
</body>
</html>